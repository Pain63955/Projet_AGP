<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>R√©sultats</title>
    <h:outputStylesheet library="css" name="style.css" />
    
</h:head>
<ui:include src="header.xhtml"></ui:include>
<h:body>
    <h1>R√©sultats de la recherche</h1>
    
    <!-- Recherche Simple -->
    <h2>üîç Recherche par mots-cl√©s</h2>
    <h:panelGroup rendered="#{not empty searchCriteriaBean.keywords}">
        <div class="search-info">
            <strong>Mots-cl√©s recherch√©s :</strong> 
            <h:outputText value="#{searchCriteriaBean.keywords}" />
        </div>
    </h:panelGroup>
    
    <!-- Tableau des r√©sultats simples -->
    <h:panelGroup rendered="#{not empty searchCriteriaBean.simpleResults}">
        <h:dataTable value="#{searchCriteriaBean.simpleResults}" var="site"
                     styleClass="results-table"
                     headerClass="table-header"
                     rowClasses="table-row-odd,table-row-even">
      
            <!-- Colonne Nom -->
            <h:column>
                <f:facet name="header">Nom</f:facet>
                <h:outputText value="#{site.name}" />
            </h:column>
            
            <!-- Colonne Prix -->
            <h:column>
                <f:facet name="header">Prix (‚Ç¨)</f:facet>
                <h:outputText value="#{site.price}">
                    <f:convertNumber type="currency" currencySymbol="‚Ç¨" />
                </h:outputText>
            </h:column>
            
            <!-- Colonne Transport -->
            <h:column>
                <f:facet name="header">Transport</f:facet>
                <h:outputText value="#{site.transport}" />
            </h:column>
            
            <!-- Colonne Adresse -->
            <h:column>
                <f:facet name="header">Adresse</f:facet>
                <h:outputText value="#{site.address.street}, #{site.address.postCode} #{site.address.town}" />
            </h:column>
            
            <!-- Colonne Coordonn√©es GPS -->
            <h:column>
                <f:facet name="header">Coordonn√©es</f:facet>
                <h:outputText value="#{site.address.latitude}, #{site.address.longitude}">
                    <f:convertNumber pattern="#0.####" />
                </h:outputText>
            </h:column>
           
            
        </h:dataTable>
    </h:panelGroup>
    
    <!-- Message si pas de r√©sultats -->
    <h:panelGroup rendered="#{empty searchCriteriaBean.simpleResults and not empty searchCriteriaBean.keywords}">
        <div class="no-results">
            ‚ÑπÔ∏è Aucun site touristique ne correspond √† votre recherche.
        </div>
    </h:panelGroup>
    
    <br/>
    
    <!-- Recherche Complexe -->
    <h2>üîß Recherche complexe</h2>
    <h:panelGroup rendered="#{not empty searchCriteriaBean.budgetMin or not empty searchCriteriaBean.budgetMax}">
        <div class="search-info">
            <strong>Budget :</strong> 
            <h:outputText value="#{searchCriteriaBean.budgetMin}">
                <f:convertNumber type="currency" currencySymbol="‚Ç¨" />
            </h:outputText>
            -
            <h:outputText value="#{searchCriteriaBean.budgetMax}">
                <f:convertNumber type="currency" currencySymbol="‚Ç¨" />
            </h:outputText>
            <br />
            <strong>Dur√©e :</strong> 
            <h:outputText value="#{searchCriteriaBean.nbDays}" />
            jours
            <br />
            <strong>H√¥tel :</strong> 
            <h:outputText value="#{searchCriteriaBean.grade}" />
            √©toiles
            <br />
            <strong>Confort :</strong> 
            <h:outputText value="#{searchCriteriaBean.confort}" />
            / 5
        </div>
    </h:panelGroup>
    
    <!-- Tableau des r√©sultats complexes -->
    <h:panelGroup rendered="#{not empty searchCriteriaBean.complexResults}">
        <h:dataTable value="#{searchCriteriaBean.complexResults}" var="offer"
                     styleClass="results-table"
                     headerClass="table-header"
                     rowClasses="table-row-odd,table-row-even">
            
            <!-- Colonne S√©jour -->
            <h:column>
                <f:facet name="header">Offre de s√©jour</f:facet>
                <h:outputText value="#{offer}" />
            </h:column>
            
            <!-- Vous pouvez ajouter d'autres colonnes selon les attributs de StayOffer -->
            <!-- Exemple :
            <h:column>
                <f:facet name="header">Prix total</f:facet>
                <h:outputText value="#{offer.totalPrice}">
                    <f:convertNumber type="currency" currencySymbol="‚Ç¨" />
                </h:outputText>
            </h:column>
            
            <h:column>
                <f:facet name="header">Score confort</f:facet>
                <h:outputText value="#{offer.scoreComfort}">
                    <f:convertNumber pattern="#0.0" />
                </h:outputText>
            </h:column>
            -->
            
        </h:dataTable>
    </h:panelGroup>
    
    <!-- Message si pas de r√©sultats complexes -->
    <h:panelGroup rendered="#{empty searchCriteriaBean.complexResults and not empty searchCriteriaBean.budgetMin}">
        <div class="no-results">
            ‚ÑπÔ∏è Aucune offre de s√©jour ne correspond √† vos crit√®res.
        </div>
    </h:panelGroup>
    
    <br />
    <h:link value="‚Üê Retour √† la recherche" outcome="index" styleClass="back-link" />
</h:body>
</html>
